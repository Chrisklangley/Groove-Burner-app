{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import\"./SearchBar.css\";import Groovelist from\"./Groovelist\";import axios from\"axios\";import{useAuthUser}from\"react-auth-kit\";import SongResults from\"./SongResults\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchBar(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchInput=_useState2[0],setSearchInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),searchDropdown=_useState6[0],setSearchDropdown=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedSongs=_useState8[0],setSelectedSongs=_useState8[1];var options={method:\"GET\",url:\"https://spotify23.p.rapidapi.com/search/\",params:{q:searchInput,type:\"tracks\",offset:\"0\",limit:\"10\",numberOfTopResults:\"5\"},headers:{\"X-RapidAPI-Key\":\"74233648d1msha948e959543800ep130f18jsn35b79b171aee\",\"X-RapidAPI-Host\":\"spotify23.p.rapidapi.com\"}};var submitSearchHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.request(options);case 4:res=_context.sent;setSearchResults(res.data.tracks.items);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function submitSearchHandler(_x){return _ref.apply(this,arguments);};}();var dropDown=useRef();useEffect(function(){var close=function close(e){if(dropDown.current&&!dropDown.current.contains(e.target)){setSearchDropdown(false);}};document.addEventListener(\"mousedown\",close);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title-search\",children:\"Search a Song then click it add to your Groovelist\"}),/*#__PURE__*/_jsx(\"form\",{className:\"searchbar-container\",onSubmit:submitSearchHandler,children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{ref:dropDown,onClick:function onClick(){return setSearchDropdown(true);},type:\"text\",placeholder:\"Search a tune...\",value:searchInput,onChange:function onChange(e){return setSearchInput(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSearchDropdown(true);},className:\"search-btn\",children:\"Search\"})]})}),searchDropdown&&searchResults.length>2?/*#__PURE__*/_jsx(\"div\",{className:\"result-container\",ref:dropDown,children:searchResults.map(function(songs,i){return/*#__PURE__*/_jsx(SongResults,{songs:songs,setSelected:setSelectedSongs});})}):null,/*#__PURE__*/_jsx(Groovelist,{songs:selectedSongs})]});}export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Groovelist","axios","useAuthUser","SongResults","jsx","_jsx","jsxs","_jsxs","SearchBar","_useState","_useState2","_slicedToArray","searchInput","setSearchInput","_useState3","_useState4","searchResults","setSearchResults","_useState5","_useState6","searchDropdown","setSearchDropdown","_useState7","_useState8","selectedSongs","setSelectedSongs","options","method","url","params","q","type","offset","limit","numberOfTopResults","headers","submitSearchHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","res","wrap","_callee$","_context","prev","next","preventDefault","request","sent","data","tracks","items","t0","console","error","stop","_x","apply","arguments","dropDown","close","current","contains","target","document","addEventListener","children","className","onSubmit","ref","onClick","placeholder","value","onChange","length","map","songs","i","setSelected"],"sources":["/Users/christopherlangley/react-projects/Specs-Capstone/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./SearchBar.css\";\nimport Groovelist from \"./Groovelist\";\nimport axios from \"axios\";\nimport { useAuthUser } from \"react-auth-kit\";\nimport SongResults from \"./SongResults\";\n\nfunction SearchBar() {\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchDropdown, setSearchDropdown] = useState(true);\n  const [selectedSongs, setSelectedSongs] = useState([]);\n\n  const options = {\n    method: \"GET\",\n    url: \"https://spotify23.p.rapidapi.com/search/\",\n    params: {\n      q: searchInput,\n      type: \"tracks\",\n      offset: \"0\",\n      limit: \"10\",\n      numberOfTopResults: \"5\",\n    },\n    headers: {\n      \"X-RapidAPI-Key\": \"74233648d1msha948e959543800ep130f18jsn35b79b171aee\",\n      \"X-RapidAPI-Host\": \"spotify23.p.rapidapi.com\",\n    },\n  };\n\n  const submitSearchHandler = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.request(options);\n      setSearchResults(res.data.tracks.items);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  let dropDown = useRef();\n  useEffect(() => {\n    const close = (e) => {\n      if (dropDown.current && !dropDown.current.contains(e.target)) {\n        setSearchDropdown(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", close);\n  });\n\n  return (\n    <div>\n      <h2 className=\"title-search\">\n        Search a Song then click it add to your Groovelist\n      </h2>\n      <form className=\"searchbar-container\" onSubmit={submitSearchHandler}>\n        <div className=\"search-bar\">\n          <input\n            ref={dropDown}\n            onClick={() => setSearchDropdown(true)}\n            type=\"text\"\n            placeholder=\"Search a tune...\"\n            value={searchInput}\n            onChange={(e) => setSearchInput(e.target.value)}\n          />\n          <button\n            onClick={() => setSearchDropdown(true)}\n            className=\"search-btn\"\n          >\n            Search\n          </button>\n        </div>\n      </form>\n      {searchDropdown && searchResults.length > 2 ? (\n        <div className=\"result-container\" ref={dropDown}>\n          {searchResults.map((songs, i) => {\n            return <SongResults songs={songs} setSelected={setSelectedSongs} />;\n          })}\n        </div>\n      ) : null}\n      <Groovelist songs={selectedSongs} />\n    </div>\n  );\n}\n\nexport default SearchBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}