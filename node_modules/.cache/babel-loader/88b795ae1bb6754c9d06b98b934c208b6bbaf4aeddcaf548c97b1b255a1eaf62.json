{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useSignIn,useIsAuthenticated}from\"react-auth-kit\";import{useNavigate}from\"react-router-dom\";import\"./Register.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),triggerSignup=_useState2[0],setTriggerSignup=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var signIn=useSignIn();var navigate=useNavigate();var isAuthenticated=useIsAuthenticated();var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var validateForm=function validateForm(){if(username.trim()===\"\"||email.trim()===\"\"||password.trim()===\"\"){alert(\"Please fill in all fields\");return false;}if(!email.includes(\"@\")){alert(\"Please enter a valid email address\");return false;}return true;};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var body,URL;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(validateForm()){_context.next=3;break;}return _context.abrupt(\"return\");case 3:body={username:username,email:email,password:password};URL=\"http://localhost:4838\";axios.post(triggerSignup?\"\".concat(URL,\"/login\"):\"\".concat(URL,\"/register\"),body).then(function(res){console.log(res.data);signIn({token:res.data.token,expiresIn:3600,tokenType:\"Bearer\",authState:{email:res.data.email,name:res.data.username}});}).then(function(){setTimeout(function(){navigate(\"/home\");},2000);}).catch(function(error){console.log(error);});case 6:case\"end\":return _context.stop();}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"main-form-containter\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\\"Find your rhythm \",/*#__PURE__*/_jsx(\"br\",{}),\" with Groove Burner\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-containter\",children:[/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",onChange:function onChange(e){return setUsername(e.target.value);},value:username}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password}),/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",children:triggerSignup?\"login\":\"register\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"signin-btn\",onClick:function onClick(){return setTriggerSignup(!triggerSignup);},children:[!triggerSignup?\"need to login?\":\"need to register?\",errorMessage?null:/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:\"User not authenticated\"})]})]})]});}export default Register;","map":{"version":3,"names":["React","useState","useSignIn","useIsAuthenticated","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Register","_useState","_useState2","_slicedToArray","triggerSignup","setTriggerSignup","_useState3","_useState4","username","setUsername","_useState5","_useState6","email","setEmail","_useState7","_useState8","password","setPassword","signIn","navigate","isAuthenticated","_useState9","_useState10","errorMessage","setErrorMessage","validateForm","trim","alert","includes","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","body","URL","wrap","_callee$","_context","prev","next","preventDefault","abrupt","post","concat","then","res","console","log","data","token","expiresIn","tokenType","authState","name","setTimeout","catch","error","stop","_x","apply","arguments","className","children","action","onSubmit","type","placeholder","onChange","target","value","onClick"],"sources":["/Users/christopherlangley/react-projects/Specs-Capstone/src/components/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useSignIn, useIsAuthenticated } from \"react-auth-kit\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Register.css\";\nimport axios from \"axios\";\n\nfunction Register() {\n  const [triggerSignup, setTriggerSignup] = useState(true);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const signIn = useSignIn();\n  const navigate = useNavigate();\n  const isAuthenticated = useIsAuthenticated();\n  const [errorMessage, setErrorMessage] = useState(true);\n\n  const validateForm = () => {\n    if (\n      username.trim() === \"\" ||\n      email.trim() === \"\" ||\n      password.trim() === \"\"\n    ) {\n      alert(\"Please fill in all fields\");\n      return false;\n    }\n\n    if (!email.includes(\"@\")) {\n      alert(\"Please enter a valid email address\");\n      return false;\n    }\n\n    return true;\n  };\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n\n    const body = {\n      username,\n      email,\n      password,\n    };\n    const URL = \"http://localhost:4838\";\n\n    axios\n      .post(triggerSignup ? `${URL}/login` : `${URL}/register`, body)\n      .then((res) => {\n        console.log(res.data);\n\n        signIn({\n          token: res.data.token,\n          expiresIn: 3600,\n          tokenType: \"Bearer\",\n          authState: {\n            email: res.data.email,\n            name: res.data.username,\n          },\n        });\n      })\n      .then(() => {\n        setTimeout(() => {\n          navigate(\"/home\");\n        }, 2000);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <div className=\"main-form-containter\">\n      <h1>\n        \"Find your rhythm <br /> with Groove Burner\"\n      </h1>\n      <div className=\"form-containter\">\n        <form action=\"\" className=\"form\" onSubmit={submitHandler}>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            onChange={(e) => setUsername(e.target.value)}\n            value={username}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Email\"\n            onChange={(e) => setEmail(e.target.value)}\n            value={email}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={(e) => setPassword(e.target.value)}\n            value={password}\n          />\n          <button className=\"login-btn\">\n            {triggerSignup ? `login` : \"register\"}\n          </button>\n        </form>\n        <button\n          className=\"signin-btn\"\n          onClick={() => setTriggerSignup(!triggerSignup)}\n        >\n          {!triggerSignup ? \"need to login?\" : \"need to register?\"}\n          {errorMessage ? null : (\n            <p className=\"error-message\">User not authenticated</p>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}