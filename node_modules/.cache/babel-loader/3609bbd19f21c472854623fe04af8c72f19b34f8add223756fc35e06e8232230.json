{"ast":null,"code":"import _slicedToArray from\"/Users/christopherlangley/react-projects/Specs-Capstone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./Groovelist.css\";import Cookies from\"js-cookie\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Groovelist(_ref){var songs=_ref.songs;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),songList=_useState2[0],setSongList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var navigate=useNavigate();var authStateName=Cookies.get(\"_auth_state\");var userName=JSON.parse(authStateName).name;var authState=Cookies.get(\"_auth_state\");var email=JSON.parse(authState).email;var body={email:email};var getTotal=function getTotal(){axios.get(\"http://localhost:4838/getTotal/\".concat(email)).then(function(res){setTotal(res.data.sum);}).catch(function(err){console.error(err);});};useEffect(function(){getTrackList();axios.get(\"http://localhost:4838/getTotal/\".concat(email)).then(function(res){setTotal(res.data.sum);}).catch(function(err){console.error(err);});},[songList]);useEffect(function(){axios.post(\"http://localhost:4838/getSongs\",body).then(function(res){setSongList(res.data);}).catch(function(err){return console.error(err);});},[songs]);var getTrackList=function getTrackList(){axios.get(\"http://localhost:4838/getTrackList/\".concat(email)).then(function(res){console.log(res.data);setSongList(res.data);}).catch(function(err){return console.error(err);});};var deleteSong=function deleteSong(e){var songId=e.target.parentElement.dataset.id;axios.delete(\"http://localhost:4838/deleteSong/\".concat(songId,\"/\").concat(email)).then(function(res){setSongList(res.data);}).catch(function(err){console.log(err);});};var results=songList.map(function(song){return/*#__PURE__*/_jsxs(\"p\",{\"data-id\":song.groovelist_id,children:[song.groovelist_song,/*#__PURE__*/_jsx(\"button\",{onClick:deleteSong,children:\"X\"})]},song.groovelist_id);});return/*#__PURE__*/_jsx(\"div\",{className:\"grovelist-main\",children:songList.length!==0?/*#__PURE__*/_jsxs(\"div\",{className:\"groovelist-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[userName,\"'s Groovelist \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-submit\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"est-total\",onClick:getTotal,children:[\"EST total:$ \",total]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/createCover\");},children:\"add songs\"})]})]}),results]}):null});}export default Groovelist;","map":{"version":3,"names":["React","useState","useEffect","axios","Cookies","useNavigate","jsx","_jsx","jsxs","_jsxs","Groovelist","_ref","songs","_useState","_useState2","_slicedToArray","songList","setSongList","_useState3","_useState4","total","setTotal","navigate","authStateName","get","userName","JSON","parse","name","authState","email","body","getTotal","concat","then","res","data","sum","catch","err","console","error","getTrackList","post","log","deleteSong","e","songId","target","parentElement","dataset","id","delete","results","map","song","groovelist_id","children","groovelist_song","onClick","className","length"],"sources":["/Users/christopherlangley/react-projects/Specs-Capstone/src/components/Groovelist.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./Groovelist.css\";\nimport Cookies from \"js-cookie\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Groovelist({ songs }) {\n  const [songList, setSongList] = useState([]);\n  const [total, setTotal] = useState(null);\n  const navigate = useNavigate();\n\n  let authStateName = Cookies.get(\"_auth_state\");\n  const userName = JSON.parse(authStateName).name;\n\n  let authState = Cookies.get(\"_auth_state\");\n  let email = JSON.parse(authState).email;\n  const body = {\n    email,\n  };\n\n  const getTotal = () => {\n    axios\n      .get(`http://localhost:4838/getTotal/${email}`)\n      .then((res) => {\n        setTotal(res.data.sum);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  useEffect(() => {\n    getTrackList();\n    axios\n      .get(`http://localhost:4838/getTotal/${email}`)\n      .then((res) => {\n        setTotal(res.data.sum);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }, [songList]);\n\n  useEffect(() => {\n    axios\n      .post(\"http://localhost:4838/getSongs\", body)\n      .then((res) => {\n        setSongList(res.data);\n      })\n      .catch((err) => console.error(err));\n  }, [songs]);\n\n  const getTrackList = () => {\n    axios\n      .get(`http://localhost:4838/getTrackList/${email}`)\n      .then((res) => {\n        console.log(res.data);\n        setSongList(res.data);\n      })\n      .catch((err) => console.error(err));\n  };\n\n  const deleteSong = (e) => {\n    const songId = e.target.parentElement.dataset.id;\n\n    axios\n      .delete(`http://localhost:4838/deleteSong/${songId}/${email}`)\n      .then((res) => {\n        setSongList(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const results = songList.map((song) => {\n    return (\n      <p key={song.groovelist_id} data-id={song.groovelist_id}>\n        {song.groovelist_song}\n        <button onClick={deleteSong}>X</button>\n      </p>\n    );\n  });\n\n  return (\n    <div className=\"grovelist-main\">\n      {songList.length !== 0 ? (\n        <div className=\"groovelist-container\">\n          <div className=\"heading\">\n            <h3>{userName}'s Groovelist </h3>\n            <div className=\"total-submit\">\n              <h5 className=\"est-total\" onClick={getTotal}>\n                EST total:$ {total}\n              </h5>\n              <button onClick={() => navigate(\"/createCover\")}>\n                add songs\n              </button>\n            </div>\n          </div>\n\n          {results}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default Groovelist;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}